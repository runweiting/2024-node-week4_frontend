import{_ as o,z as s,x as c,o as i,c as l,a as u}from"./index-tXaokC3g.js";import{e as r}from"./swalToasts-WvRuyIhW.js";const h={async mounted(){try{const e=this.getQueryParams();if(!e){r("無效的 callback URL！"),s.push({name:"sign-in"});return}const{token:a,expires:n,source:t}=e;if(!a||!n||!t){r("您尚未登入！"),s.push({name:"sign-in"});return}document.cookie=`myToken=${a}; expires=${n}`,c.defaults.headers.common.Authorization=`Bearer ${a}`,await this.handleRedirect(t)}catch(e){console.error("Callback failed",e),r("callback 處理失敗"),s.push({name:"sign-in"})}},methods:{getQueryParams(){const e=window.location.hash;console.log("hashString",e);const a=e.split("?")[1];return console.log("queryString",a),a?new URLSearchParams(a):null},async handleRedirect(e){e==="google"?await s.push({name:"metawall"}):e==="newebpay"?await s.push({name:"payment-result"}):r("未知的 callback source")}}},m=u("p",null,null,-1),p=[m];function d(e,a,n,t,f,g){return i(),l("div",null,p)}const k=o(h,[["render",d]]);export{k as default};
