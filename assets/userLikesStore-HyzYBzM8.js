import{p as w,q as h,s as i}from"./index-Do_aAaLG.js";import{s as c,e as r}from"./swalToasts-1gCIqy4y.js";import{p as _}from"./postsStore-AFCOf5SF.js";var k={VITE_APP_URL:"https://two024-node-week4.onrender.com",BASE_URL:"/2024-node-week4_frontend/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const d=w.useLoading({}),{VITE_LOCALHOST:m}=k,S=h("userCommentsStore",{state:()=>({}),actions:{async createComment(t,s){const a=d.show(),e=`${m}/posts/${t}/comment`;try{const o=await i.post(e,{comment:s});c(o.data.message)}catch(o){r(o.response.data.message)}finally{a.hide()}},async deleteComment(t){const s=d.show(),a=`${m}/posts/${t}/uncomment`;try{const e=await i.delete(a);c(e.data.message)}catch(e){r(e.response.data.message)}finally{s.hide()}}}});var p={VITE_APP_URL:"https://two024-node-week4.onrender.com",BASE_URL:"/2024-node-week4_frontend/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const u=w.useLoading({}),{VITE_LOCALHOST:f}=p,$=h("userLikesStore",{state:()=>({}),actions:{async handleLikePost(t,s,a,e){const o=_();await o.getPosts();const l=await o.getAllPosts.find(n=>n._id===s);if(t==="metawall")try{this.isLiked(l,a)?await this.unlikePost(s):await this.likePost(s),await o.getPosts()}catch(n){r(n.response)}if(t==="userwall")try{this.isLiked(l,a)?await this.unlikePost(s):await this.likePost(s),await o.getUserPosts(e)}catch(n){r(n.response)}},isLiked(t,s){return!t||!Array.isArray(t.likes)?!1:t.likes.some(a=>a.user._id===s)},async likePost(t){const s=u.show(),a=`${f}/posts/${t}/like`;try{const e=await i.post(a);c(e.data.message)}catch(e){console.log(e),r(e.response.data.message)}finally{s.hide()}},async unlikePost(t){const s=u.show(),a=`${f}/posts/${t}/unlike`;try{const e=await i.delete(a);c(e.data.message)}catch(e){console.log(e),r(e.response.data.message)}finally{s.hide()}}}});export{$ as a,S as u};
