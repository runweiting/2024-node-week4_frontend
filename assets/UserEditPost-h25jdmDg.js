import{_ as h,e as b,m as c,o as a,c as n,a as t,f as l,g as p,F as g,i as f,h as P,p as _,t as k}from"./index-sAfB4zop.js";import{p as u}from"./postsStore-yiMG0epx.js";import{f as v}from"./formatCreatedAt-CTMo6T3e.js";import{e as i}from"./swalToasts-6FTt0AAk.js";import{t as x}from"./timestampToDate-lwWXufjj.js";import{u as y}from"./userPostsStore-K_6SwLrb.js";const U={data(){return{tempPost:{content:"",image:""},tags:["音樂","運動","美食","旅遊","其他"]}},async created(){await this.getPost(this.$route.params.postId),this.tempPost={...this.targetPost}},computed:{...b(u,["targetPost"])},methods:{...c(u,["getPost"]),...c(y,["updatePost"]),handleTags(r){r.length>3&&this.tempPost.tags.pop()},handleUpdatePost(r,e){return r.content?r.image.startsWith("http")?r.length===0?i("貼文標籤為必填"):(this.updatePost(r.content,r.image,r.tags,e),this.tempPost.content="",this.tempPost.image="",this.tempPost.tags.length=0,this.$router.push({name:"all"}),null):i("圖片網址錯誤"):i("貼文內容為必填")},formatCreatedAt:v,timestampToDate:x}},w={key:0,class:"row gy-4"},C={class:"col"},T={class:"bg-white rounded border border-2 border-black p-8",style:{"border-bottom":"4px solid black !important"}},V={class:"d-flex flex-column gap-1 mb-4"},S=t("span",null,"貼文內容",-1),B={class:"d-flex flex-column gap-1 mb-4"},D=t("span",null,"圖片網址",-1),A={class:"mb-4"},E=["src"],F={class:"mb-4"},I=t("span",{class:"d-block"},"貼文標籤",-1),M=["id","value"],N=["for"];function j(r,e,L,W,s,m){return s.tempPost.id?(a(),n("div",w,[t("div",C,[t("div",T,[t("div",V,[S,l(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.tempPost.content=o),class:"form-control rounded-0 border border-black border-2",placeholder:"請輸入內容","aria-label":"post-content"},null,512),[[p,s.tempPost.content]])]),t("div",B,[D,l(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.tempPost.image=o),type:"text",class:"form-control rounded-0 border border-black border-2",placeholder:"請輸入網址","aria-label":"imageUrl","aria-describedby":"imageUrl"},null,512),[[p,s.tempPost.image]])]),t("div",A,[t("img",{src:s.tempPost.image,alt:"tempImage",class:"object-fit-cover img-fluid"},null,8,E)]),t("div",F,[I,(a(!0),n(g,null,f(s.tags,o=>(a(),n("div",{key:o,class:"form-check form-check-inline"},[l(t("input",{onChange:e[2]||(e[2]=d=>m.handleTags(s.tempPost.tags)),"onUpdate:modelValue":e[3]||(e[3]=d=>s.tempPost.tags=d),class:"form-check-input",type:"checkbox",id:o,value:o},null,40,M),[[_,s.tempPost.tags]]),t("label",{class:"form-check-label",for:o},k(o),9,N)]))),128))]),t("button",{onClick:e[4]||(e[4]=o=>m.handleUpdatePost(this.tempPost,this.tempPost.id)),type:"button",class:"btn btn-light-gray py-4 border border-2 border-black w-50"},"更新貼文")])])])):P("",!0)}const O=h(U,[["render",j]]);export{O as default};
