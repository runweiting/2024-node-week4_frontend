import{l as u,n as m,p as r}from"./index-UEIPA65Y.js";import{S as n,s as i}from"./showErrorToast-MHv8Z4Il.js";function f(e){return new Promise(t=>{n.mixin({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!1,didOpen:s=>{s.addEventListener("mouseenter",n.stopTimer),s.addEventListener("mouseleave",n.resumeTimer)}}).fire({icon:"success",title:e}).then(()=>{t()})})}var p={VITE_APP_URL:"https://two024-node-week4.onrender.com/posts",BASE_URL:"/2024-node-week4_frontend/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const c=u.useLoading({}),{VITE_APP_URL:d}=p,w=m("userPostsStore",{state:()=>({postsList:[]}),actions:{async getPosts(e=null,t=null){const o=c.show();let s=`${d}`;e!==null&&(s+=`?timeSort=${e}`,t&&(s+=`&q=${t}`));try{const a=await r.get(s),{post:l}=a.data;this.postsList=l}catch(a){i(a.response.data.message)}finally{o.hide()}},async createPosts(e,t){const o=c.show();try{await r.post(d,{user:"662a6bacbf706db5129b49fa",content:e,image:t,likes:""}),f("新增成功"),this.getPosts()}catch(s){i(s.response.data.message)}finally{o.hide()}}}});export{w as u};
