import{_ as h,f as b,m as c,o as a,c as l,a as t,g as n,h as p,F as g,k as f,j as P,s as _,t as k}from"./index-YBCA0vwM.js";import{p as u}from"./postsStore-3j3dsD5B.js";import{f as v}from"./formatCreatedAt-CTMo6T3e.js";import{e as i}from"./swalToasts-9FqNNr8f.js";import{t as x}from"./timestampToDate-lwWXufjj.js";import{u as y}from"./userPostsStore-dqfuUJAp.js";const U={data(){return{tempPost:{content:"",image:""},tags:["音樂","運動","美食","旅遊","其他"]}},async created(){await this.getPost(this.$route.params.postId),this.tempPost={...this.targetPost}},computed:{...b(u,["targetPost"])},methods:{...c(u,["getPost"]),...c(y,["updatePost"]),handleTags(r){r.length>3&&this.tempPost.tags.pop()},handleUpdatePost(r,e){return r.content?r.image.startsWith("http")?r.length===0?i("貼文標籤為必填"):(this.updatePost(r.content,r.image,r.tags,e),this.tempPost.content="",this.tempPost.image="",this.tempPost.tags.length=0,this.$router.push({name:"all"}),null):i("圖片網址錯誤"):i("貼文內容為必填")},formatCreatedAt:v,timestampToDate:x}},w={key:0,class:"row gy-4"},C={class:"col"},T={class:"bg-white rounded border border-2 border-black p-8",style:{"border-bottom":"4px solid black !important"}},V={class:"d-flex flex-column gap-1 mb-4"},S=t("span",null,"貼文內容",-1),B={class:"d-flex flex-column gap-1 mb-4"},D=t("span",null,"圖片網址",-1),j={class:"mb-4"},A=["src"],E={class:"mb-4"},F=t("span",{class:"d-block"},"貼文標籤",-1),I=["id","value"],M=["for"];function N(r,e,L,W,s,m){return s.tempPost.id?(a(),l("div",w,[t("div",C,[t("div",T,[t("div",V,[S,n(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.tempPost.content=o),class:"form-control rounded-0 border border-black border-2",placeholder:"請輸入內容","aria-label":"post-content"},null,512),[[p,s.tempPost.content]])]),t("div",B,[D,n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.tempPost.image=o),type:"url",class:"form-control rounded-0 border border-black border-2",placeholder:"請輸入網址","aria-label":"imageUrl","aria-describedby":"imageUrl"},null,512),[[p,s.tempPost.image]])]),t("div",j,[t("img",{src:s.tempPost.image,alt:"tempImage",class:"object-fit-cover img-fluid"},null,8,A)]),t("div",E,[F,(a(!0),l(g,null,f(s.tags,o=>(a(),l("div",{key:o,class:"form-check form-check-inline"},[n(t("input",{onChange:e[2]||(e[2]=d=>m.handleTags(s.tempPost.tags)),"onUpdate:modelValue":e[3]||(e[3]=d=>s.tempPost.tags=d),class:"form-check-input",type:"checkbox",id:o,value:o},null,40,I),[[_,s.tempPost.tags]]),t("label",{class:"form-check-label",for:o},k(o),9,M)]))),128))]),t("button",{onClick:e[4]||(e[4]=o=>m.handleUpdatePost(this.tempPost,this.tempPost.id)),type:"button",class:"btn btn-light-gray py-4 border border-2 border-black w-50"},"更新貼文")])])])):P("",!0)}const O=h(U,[["render",N]]);export{O as default};
