import{p as w,q as k,s as x,_ as U,e as y,m as P,r as h,o as c,c as d,b,a as e,f as i,g as _,F as u,i as T,u as S,t as D}from"./index-Do_aAaLG.js";import{s as V,e as l}from"./swalToasts-1gCIqy4y.js";import{p as C}from"./postsStore-AFCOf5SF.js";import{U as E}from"./UserNavbar-EBvnelxQ.js";import{U as L}from"./UserDashboard-oBsLNwdH.js";import"./userUsersStore-64V5Wi2f.js";import"./user_default-gs4whxCm.js";var N={VITE_APP_URL:"https://two024-node-week4.onrender.com",BASE_URL:"/2024-node-week4_frontend/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const A=w.useLoading({}),{VITE_LOCALHOST:B}=N,f=k("userPostsStore",{state:()=>({}),actions:{async createPost(r,s,a){const m=A.show(),t=`${B}/posts`;try{const n=await x.post(t,{content:r,image:s,tags:a});V(n.data.message),await C().getPosts()}catch(n){l(n.response.data.message)}finally{m.hide()}}}}),I={components:{UserNavbar:E,UserDashboard:L},data(){return{content:"",image:"",tags:["音樂","運動","美食","旅遊","其他"],selectedTags:[]}},watch:{selectedTags(r){r.length>3&&this.selectedTags.pop()}},computed:{...y(f,["newPost"])},methods:{...P(f,["createPost","getPosts"]),handleCreatePost(r,s,a){return r?s.startsWith("http")?a.length===0?l("貼文標籤為必填"):(this.createPost(r,s,a),this.tempContent="",this.tempImage="",this.tags.length=0,this.$router.push({name:"metawall"}),null):l("圖片網址錯誤"):l("貼文內容為必填")}}},O={class:"container py-12",style:{height:"100dvh"}},R={class:"row"},M={class:"col-8"},F=e("div",{class:"row"},[e("div",{class:"col shadow-new-post"},[e("div",{class:"rounded-0 bg-white border border-2 border-black azeret-mono fs-5 fw-bold py-5 mb-6 w-100 text-center"}," 張貼動態 ")])],-1),j={class:"row"},q={class:"col"},z={class:"bg-white rounded border border-2 border-black p-8",style:{"border-bottom":"4px solid black !important"}},H={class:"d-flex flex-column gap-1 mb-4"},W=e("span",null,"貼文內容",-1),G={class:"d-flex flex-column gap-1 mb-4"},J=e("span",null,"圖片網址",-1),K={class:"mb-4"},Q=["src"],X={class:"mb-4"},Y=e("span",{class:"d-block"},"貼文標籤",-1),Z=["id","value"],$=["for"],ee={class:"col-4"};function se(r,s,a,m,t,n){const p=h("UserNavbar"),g=h("UserDashboard");return c(),d(u,null,[b(p),e("div",O,[e("div",R,[e("div",M,[F,e("div",j,[e("div",q,[e("div",z,[e("div",H,[W,i(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=o=>t.content=o),class:"form-control rounded-0 border border-black border-2",placeholder:"請輸入內容","aria-label":"post-content"},null,512),[[_,t.content]])]),e("div",G,[J,i(e("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>t.image=o),type:"text",class:"form-control rounded-0 border border-black border-2",placeholder:"請輸入網址","aria-label":"imageUrl","aria-describedby":"imageUrl"},null,512),[[_,t.image]])]),e("div",K,[e("img",{src:t.image,alt:"tempImage",class:"object-fit-cover img-fluid"},null,8,Q)]),e("div",X,[Y,(c(!0),d(u,null,T(t.tags,o=>(c(),d("div",{key:o,class:"form-check form-check-inline"},[i(e("input",{"onUpdate:modelValue":s[2]||(s[2]=v=>t.selectedTags=v),class:"form-check-input",type:"checkbox",id:o,value:o},null,8,Z),[[S,t.selectedTags]]),e("label",{class:"form-check-label",for:o},D(o),9,$)]))),128))]),e("button",{onClick:s[3]||(s[3]=o=>n.handleCreatePost(this.content,this.image,this.selectedTags)),type:"button",class:"btn btn-light-gray py-4 border border-2 border-black w-50"},"送出貼文")])])])]),e("div",ee,[b(g)])])])],64)}const de=U(I,[["render",se]]);export{de as default};
