import{_ as o,z as r,x as c,o as i,c as l,a as u}from"./index-3T23bGIL.js";import{e as t}from"./swalToasts-R4IB3Xl2.js";const m={async mounted(){try{const e=this.getQueryParams();if(!e){t("無效的 callback URL！"),r.push({name:"sign-in"});return}const{token:a,expires:s,source:n}=e;if(!a||!s||!n){t("您尚未登入！"),r.push({name:"sign-in"});return}document.cookie=`myToken=${a}; expires=${s}`,c.defaults.headers.common.Authorization=`Bearer ${a}`,await this.handleRedirect(n)}catch(e){console.error("Callback failed",e),t("callback 處理失敗"),r.push({name:"sign-in"})}},methods:{getQueryParams(){const a=window.location.hash.split("?")[1];if(!a)return null;const s=new URLSearchParams(a);return console.log("params",s),Object.fromEntries(s.entries())},async handleRedirect(e){e==="google"?await r.push({name:"metawall"}):e==="newebpay"?await r.push({name:"payment-result"}):t("未知的 callback source")}}},h=u("p",null,null,-1),p=[h];function d(e,a,s,n,f,_){return i(),l("div",null,p)}const y=o(m,[["render",d]]);export{y as default};
