import{_ as y,e as p,m as h,o as r,c as i,a as e,t as a,h as c,f as b,v as x,g,F as m,i as u,n as w,k}from"./index-Do_aAaLG.js";import{p as f}from"./postsStore-AFCOf5SF.js";import{u as v}from"./userUsersStore-64V5Wi2f.js";import{u as U,a as C}from"./userLikesStore-HyzYBzM8.js";import{f as P}from"./formatCreatedAt-CTMo6T3e.js";import"./swalToasts-1gCIqy4y.js";const S={data(){return{timeSort:"",keyword:"",comment:"",targetUserId:""}},created(){this.targetUserId=this.$route.params.id},async mounted(){await this.getUserPosts(this.targetUserId),await this.getProfile()},computed:{...p(f,["userPosts"]),...p(v,["profile"])},methods:{...h(f,["getUserPosts"]),...h(v,["getProfile"]),...h(U,["createComment","deleteComment"]),...h(C,["handleLikePost","isLiked","likePost","unlikePost"]),handleSearchPosts(t){this.getUserPosts(this.targetUserId,"asc",t)},handleCreateComment(t,o){this.createComment(t,o),this.comment="",this.resetTextareaHeight(),this.getUserPosts(this.targetUserId)},handleDeleteComment(t){this.deleteComment(t).then(()=>this.getUserPosts(this.targetUserId))},adjustTextareaHeight(t){const o=t.target;o&&(o.style.height=`${o.scrollHeight}px`)},resetTextareaHeight(){const t=this.$refs.commentTextarea;t&&(t[0].style.height="1rem")},formatCreatedAt:P}},j={class:"col-8"},I={key:0,class:"row"},T=e("div",{class:"col shadow-new-post"},[e("div",{class:"bg-white border border-2 border-black azeret-mono fs-5 fw-bold py-5 mb-6 w-100 text-center"}," 我的個人牆 ")],-1),A=[T],D={key:1,class:"row mb-6"},H={class:"col shadow-user-wall"},L={key:0,class:"d-flex bg-white rounded border border-2 border-black"},V={class:"overflow-hidden rounded-start",style:{width:"80px",height:"80px"}},z=["src","alt"],B={class:"d-flex justify-content-between p-4 w-100"},N={class:"d-flex flex-column"},F={class:"noto-sans-tc text-primary fw-bold"},M={class:"baloo-da-2"},E=e("button",{type:"button",class:"btn btn-warning rounded border border-2 border-black w-25 noto-sans-tc fw-bold",style:{"border-bottom":"4px solid black !important"}},"追蹤",-1),W={class:"row mb-4"},q={class:"col-4"},G=e("option",{value:"",selected:""},"請選擇順序",-1),J=e("option",{value:"asc"},"從新到舊",-1),K=e("option",{value:"desc"},"從舊到新",-1),O=[G,J,K],Q={class:"col-8"},R={class:"input-group"},X=e("i",{class:"bi bi-search text-white fs-4"},null,-1),Y=[X],Z={key:2,class:"row"},$=k('<div class="col"><div class="bg-white rounded border border-2 border-black" style="border-bottom:4px solid black !important;"><div class="d-flex align-items-center gap-2 border-bottom border-2 border-black p-4 w-100" style="height:52px;"><div class="rounded border border-black border-1 bg-danger" style="width:10px;height:10px;"></div><div class="rounded border border-black border-1 bg-warning" style="width:10px;height:10px;"></div><div class="rounded border border-black border-1 bg-success" style="width:10px;height:10px;"></div></div><div class="text-center py-8" style="height:80px;"><p class="text-gray">目前尚無動態，新增一則貼文吧！</p></div></div></div>',1),ee=[$],te={key:3,class:"row gy-6"},se={class:"bg-white rounded border border-2 border-black p-6",style:{"border-bottom":"4px solid black !important"}},oe={key:0,class:"d-flex gap-2 mb-4"},re={class:"rounded-circle overflow-hidden",style:{width:"45px",height:"45px"}},ie=["src","alt"],de={class:"d-flex flex-column justify-content-between text-start"},le={class:"noto-sans-tc text-primary fw-bold"},ae={class:"baloo-da-2 text-gray"},ne={class:"noto-sans-tc mb-4"},ce=["src","alt"],he={class:"d-flex gap-2 mb-5"},be={class:"d-flex align-items-center mb-5"},me={key:0,class:"d-flex align-items-center gap-2"},ue=e("div",{class:"rounded-circle overflow-hidden bg-primary position-relative",style:{width:"24px",height:"24px"}},[e("i",{class:"bi bi-hand-thumbs-up-fill text-white position-absolute top-50 start-50 translate-middle"})],-1),_e={key:0,class:"noto-sans-tc"},pe={class:"ms-auto"},ge={class:"d-flex align-items-center gap-2"},fe=["onClick"],ve={class:"baloo-da-2 fw-bold"},ye={class:"d-flex align-items-start gap-2 mb-4 w-100"},xe={key:0,class:"rounded-circle overflow-hidden",style:{width:"40px",height:"40px"}},we=["src","alt"],ke=["onClick"],Ue={class:"row px-4 gy-4"},Ce={class:"d-flex align-items-center gap-2 mb-1"},Pe={class:"rounded-circle overflow-hidden",style:{width:"40px",height:"40px"}},Se=["src","alt"],je={class:"d-flex flex-column justify-content-between text-start"},Ie={class:"noto-sans-tc text-primary fw-bold"},Te={class:"baloo-da-2 text-gray"},Ae={class:"d-flex justify-content-between align-items-center"},De={class:"ms-12 mb-1",style:{width:"85%"}},He={class:"mt-auto"},Le=["onClick"],Ve=e("i",{class:"bi bi-trash3 text-primary"},null,-1),ze=[Ve];function Be(t,o,Ne,Fe,l,n){return r(),i("div",j,[l.targetUserId===t.profile._id?(r(),i("div",I,A)):(r(),i("div",D,[e("div",H,[t.userPosts.targetUser?(r(),i("div",L,[e("div",V,[e("img",{src:t.userPosts.targetUser.photo,alt:`user-photo-${t.userPosts.targetUser.name}`,class:"object-fit-cover img-fluid",style:{height:"80px"}},null,8,z)]),e("div",B,[e("div",N,[e("span",F,a(t.userPosts.targetUser.name),1),e("span",M,a(t.userPosts.targetUser.followers.length)+" 人追蹤",1)]),E])])):c("",!0)])])),e("div",W,[e("div",q,[b(e("select",{onInput:o[0]||(o[0]=s=>t.getUserPosts(l.targetUserId,l.timeSort)),"onUpdate:modelValue":o[1]||(o[1]=s=>l.timeSort=s),class:"form-select rounded-0 border-2 border-black py-3 ps-4 pe-10","aria-label":"posts-select"},O,544),[[x,l.timeSort]])]),e("div",Q,[e("div",R,[b(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>l.keyword=s),type:"text",class:"form-control rounded-0 border-2 border-black py-3 px-4",placeholder:"搜尋貼文","aria-label":"搜尋貼文","aria-describedby":"搜尋貼文"},null,512),[[g,l.keyword]]),e("button",{onClick:o[3]||(o[3]=s=>n.handleSearchPosts(l.keyword)),class:"btn btn-primary rounded-0 px-4",type:"button"},Y)])])]),t.userPosts.posts?c("",!0):(r(),i("div",Z,ee)),t.userPosts.posts?(r(),i("div",te,[(r(!0),i(m,null,u(t.userPosts.posts,s=>(r(),i("div",{key:s.id,class:"col-12"},[e("div",se,[s.user._id?(r(),i("div",oe,[e("div",re,[e("img",{src:s.user.photo,alt:`user-photo-${s.user.name}`,class:"object-fit-cover img-fluid",style:{height:"45px"}},null,8,ie)]),e("div",de,[e("span",le,a(s.user.name),1),e("small",ae,a(n.formatCreatedAt(s.createdAt).formattedDateAndTime),1)])])):c("",!0),e("p",ne,a(s.content),1),e("img",{src:s.image,alt:`photo-${s.image}`,class:"object-fit-cover img-fluid rounded border border-2 border-black mb-2"},null,8,ce),e("div",he,[(r(!0),i(m,null,u(s.tags,(d,_)=>(r(),i("span",{key:_,class:"badge rounded-pill bg-secondary text-black noto-sans-tc border border-2 border-black"},a(d),1))),128))]),e("div",be,[s.likes?(r(),i("div",me,[ue,s.likes[0]?(r(),i("small",_e,a(s.likes[0].user.name)+" 和其他 "+a(s.likes.length-1)+"人按讚",1)):c("",!0)])):c("",!0),e("div",pe,[e("div",ge,[e("button",{onClick:d=>t.handleLikePost("userwall",s._id,t.profile._id,l.targetUserId),type:"button",class:"btn p-0"},[e("i",{class:w([t.isLiked(s,t.profile._id)?"bi bi-hand-thumbs-up-fill":"bi bi-hand-thumbs-up","fs-5 text-primary"])},null,2)],8,fe),e("span",ve,a(s.likes.length),1)])])]),e("div",ye,[t.profile._id?(r(),i("div",xe,[e("img",{src:t.profile.photo,alt:`user-photo-${t.profile.name}`,class:"object-fit-cover img-fluid",style:{height:"40px"}},null,8,we)])):c("",!0),b(e("textarea",{ref_for:!0,ref:"commentTextarea","onUpdate:modelValue":o[4]||(o[4]=d=>l.comment=d),class:"form-control rounded border-2 border-black py-2 px-4",placeholder:"留言...","aria-label":"留言","aria-describedby":"留言",rows:"1",style:{flex:"3",overflow:"hidden",resize:"none"},onInput:o[5]||(o[5]=(...d)=>n.adjustTextareaHeight&&n.adjustTextareaHeight(...d))},null,544),[[g,l.comment]]),e("button",{onClick:d=>n.handleCreateComment(s._id,l.comment),class:"btn btn-warning rounded border-2 border-primary px-4 py-2",type:"button",style:{flex:"1"}},"留言",8,ke)]),e("div",Ue,[(r(!0),i(m,null,u(s.comments,d=>(r(),i("div",{key:d._id,class:"col-12 rounded p-4",style:{"background-color":"rgb(239 236 231 / 50%)"}},[e("div",Ce,[e("div",Pe,[e("img",{src:d.user.photo,alt:`user-photo-${d.user.name}`,class:"object-fit-cover img-fluid",style:{height:"40px"}},null,8,Se)]),e("div",je,[e("span",Ie,a(d.user.name),1),e("small",Te,a(n.formatCreatedAt(d.createdAt).formattedDateAndTime),1)])]),e("div",Ae,[e("p",De,a(d.comment),1),e("div",He,[e("button",{onClick:_=>n.handleDeleteComment(d._id),type:"button",class:"btn p-0"},ze,8,Le)])])]))),128))])])]))),128))])):c("",!0)])}const Ke=y(S,[["render",Be]]);export{Ke as default};
